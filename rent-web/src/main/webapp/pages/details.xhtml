<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:r="http://java.sun.com/jsf/composite/components">

<ui:composition template="/pages/template.xhtml">
    <ui:define name="menu">
        <ui:include src="/WEB-INF/frags/search.xhtml"/>
    </ui:define>

    <ui:define name="content">
        <h:form id="details" styleClass="margin_top_15">
            <p:growl id="growl" showDetail="true" sticky="true"/>

            <p:outputPanel layout="block">
                <h:panelGrid columns="5" id="titleDiv" styleClass="displayInlineBlock">
                    <p:rating value="#{detailsMB.favNr}" stars="1" cancel="false"
                              rendered="#{userMB.userLogged and (detailsMB.selected.status eq 'ACTIVE' or detailsMB.favNr eq 1)}">
                        <p:ajax event="rate" listener="#{detailsMB.makeFavorite()}" update="titleDiv" />
                    </p:rating>
                    <h:outputText value="Anunt - "/>
                    <h:outputText id="type" value="#{detailsMB.selected.adType}"/>
                    <h:outputText id="accomodation" value="#{detailsMB.selected.buildingType.name}"/>
                </h:panelGrid>

                <h:panelGrid columns="2" style="float: right" styleClass="displayInlineBlock">
                    Status:
                    <h:outputText value="#{detailsMB.selected.status}"
                                  rendered="#{not detailsMB.isMine() or (detailsMB.selected.status ne 'ACTIVE' and detailsMB.selected.status ne 'RETIRED')}"/>
                    <p:inputSwitch id="statusSwitch" value="#{detailsMB.active}"
                                   onLabel="activ" offLabel="inactiv" label="Status: "

                                   rendered="#{detailsMB.isMine() and (detailsMB.selected.status eq 'ACTIVE' or detailsMB.selected.status eq 'RETIRED')}">
                        <p:ajax listener="#{detailsMB.updateActive()}" update=":details:statusSwitch"/>
                    </p:inputSwitch>
                </h:panelGrid>
            </p:outputPanel>


            <div class="ui-grid">

                <div class="ui-grid-row">

                    <p:outputPanel id="contactPanel" layout="block" styleClass="ui-grid-col-12">
                        <h:outputText value="Contact: "/>

                        <p:commandButton value="arata cantact" id="ajax" update="contactPanel"
                                         rendered="#{!detailsMB.confirmHumanReq}"
                                         actionListener="#{detailsMB.confirmHuman}" />

                        <p:outputPanel id="contactDiv" layout="block"
                                       styleClass="displayInlineBlock margin_left_10"
                                       rendered="#{detailsMB.confirmHumanReq}">
                            <p:panelGrid columns="2" styleClass="tableNoPadding">
                                <h:outputText styleClass="margin_right_15 fontSize_16" value="#{detailsMB.selected.user.name}"/>
                                <h:outputText styleClass="fontSize_16" value="#{detailsMB.selected.user.phone}"/>
                            </p:panelGrid>
                        </p:outputPanel>

                    </p:outputPanel>
                </div>

                <div class="ui-grid-row">
                    <div class="ui-grid-col-12">
                        <h:outputText id="description" maxlength="150"
                                      value="#{detailsMB.selected.description}"
                                      styleClass="width_98_pc height_30 resize_none"/>
                    </div>
                </div>

                <div class="ui-grid-row margin_top_10">
                    <div class="ui-grid-col-12">
                        <p:outputLabel for="value" value="Pret: "/>
                        <h:outputText id="value" size="5" styleClass="textAlign_right"
                                      value="#{detailsMB.selected.value}"/>

                        <p:outputLabel for="deposit" value="Garantie: " styleClass="margin_left_10"
                                       rendered="#{detailsMB.hasDeposit()}"/>
                        <h:outputText id="deposit" size="5" styleClass="textAlign_right"
                                      rendered="#{detailsMB.hasDeposit()}"
                                      value="#{detailsMB.selected.deposit}"/>

                        <h:outputText id="curr" size="5" styleClass="textAlign_right"
                                      value=" #{detailsMB.selected.currency}"/>

                        <h:outputText value=", Negociabil" rendered="#{detailsMB.selected.negotiable}"/>
                    </div>
                </div>

                <div class="ui-grid-row margin_top_10" >
                    <div class="ui-grid-col-12">
                        <p:outputLabel value="Adresa:"/>
                    </div>
                </div>

                <div class="ui-grid-row margin_top_10">
                    <div class="ui-grid-col-12">
                        <h:outputText value="#{detailsMB.selected.address.city.name}"/>

                        <p:outputLabel for="street" value="Strada:" styleClass="margin_left_10"/>
                        <h:outputText id="street" size="40" value="#{detailsMB.selected.address.street}"/>

                        <p:outputLabel for="nr" value="Nr.:" styleClass="margin_left_10"/>
                        <h:outputText id="nr" size="2" value="#{detailsMB.selected.address.nr}"/>
                    </div>
                </div>

                <p:galleria value="#{detailsMB.selected.imageList}"
                            styleClass="margin_top_15"
                            rendered="#{not empty detailsMB.selected.imageList}"
                            var="image" panelWidth="500" panelHeight="313">
                    <img src="#{image.url}" alt="Image Description for #{image.url}"/>
                </p:galleria>

                 <!-- features -->
                <r:features readonly="true"
                            ftClean="#{detailsMB.getDotari(1)}"
                            ftConfort="#{detailsMB.getDotari(2)}"
                            ftKitchen="#{detailsMB.getDotari(3)}"
                            ftLiving="#{detailsMB.getDotari(4)}"
                            ftExterior="#{detailsMB.getDotari(5)}"
                            ftOthers="#{detailsMB.getDotari(6)}"/>

                <div class="ui-grid-row">
                    <div class="ui-grid-col-12">
                        <!--<p:gmap id="geoGmap" widgetVar="gMap" type="hybrid"-->
                                <!--center="#{detailsMB.centerGeoMap}" zoom="11"-->
                                <!--model="#{geocodeView.geoModel}"-->
                                <!--style="width:100%;height:300px"/>-->
                    </div>
                </div>
            </div>

        </h:form>
    </ui:define>

</ui:composition>
</html>